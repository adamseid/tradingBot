{"ast":null,"code":"var _jsxFileName = \"/media/george/DATA/Project/trading bot/2022-10-27/frontend/src/components/Tracker.js\";\nimport React, { Component, useImperativeHandle } from 'react';\nimport Navigator from './tracker/Navigator';\nimport Debug from './tracker/Debug';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst default_state = {\n  component: {\n    navigator: 'hide',\n    debug: 'show'\n  },\n  button: {\n    go_back: 'hide',\n    navigator: 'show'\n  },\n  navigator: {\n    test: 'hi',\n    path: '../storage/',\n    tempPath: '../storage/',\n    files: []\n  },\n  filename: '',\n  unit: 'kg',\n  bank_settings: {\n    select_ledger: {\n      ledgers: []\n    },\n    update_tables: {\n      update_status: 'Not Ready'\n    }\n  }\n};\nexport default class Tracker extends Component {\n  componentDidMount() {\n    this.ws.onopen = () => {\n      console.log('connected');\n    };\n    this.ws.onmessage = e => {\n      console.log(e);\n      let response = JSON.parse(e.data).response;\n      console.log(response);\n      let data = JSON.parse(e.data).data;\n      console.log(data);\n\n      //console.log(data.location[0])\n\n      if (data.location[0] == 'navigator') {\n        console.log('onmessage() location layer 0: navigator');\n        this.setState(prevState => {\n          let navigator = Object.assign({}, prevState.navigator);\n          navigator.files = data.listdir;\n          return {\n            navigator\n          };\n        });\n      }\n      ;\n    };\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    console.log('Tracker.componentDidUpdate(): STARTED');\n    console.log(prevState);\n    console.log(this.state);\n    console.log(prevState.navigator.path);\n    console.log(this.state.navigator.path);\n    if (prevState.navigator.path != this.state.navigator.path) {\n      console.log('NOT EQUAL');\n      let new_path = this.state.navigator.path;\n      this.setState(prevState => {\n        let navigator = Object.assign({}, prevState.navigator);\n        navigator.tempPath = new_path;\n        return {\n          navigator\n        };\n      });\n    }\n\n    //this.navigator.current.listDir();\n    console.log('Tracker.componentDidUpdate(): FINISHED');\n  }\n  constructor(props) {\n    super(props);\n    this.ws = new WebSocket('ws://localhost:8000/ws/websocket/' + 'tracker' + '/');\n    this.goBack = () => {\n      console.log('Tracker.goBack(): STARTED');\n      this.setState({\n        button: default_state.button,\n        component: default_state.component\n      });\n      console.log('Tracker.goBack(): FINISHED');\n    };\n    this.showNavigator = () => {\n      console.log('Tracker.showNavigator(): STARTED');\n      this.setState(prevState => {\n        let button = Object.assign({}, prevState.button);\n        let component = Object.assign({}, prevState.button);\n        button.go_back = 'show';\n        button.navigator = 'hide';\n        component.navigator = 'show';\n        return {\n          button,\n          component\n        };\n      });\n      console.log('Tracker.showNavigator(): FINISHED');\n    };\n    this.select = filename => {\n      console.log('Tracker.select(): STARTED');\n      let new_path = this.state.navigator.path + filename + '/';\n      this.setState(prevState => {\n        let navigator = Object.assign({}, prevState.navigator);\n        navigator.tempPath = navigator.path;\n        navigator.path = new_path;\n        return {\n          navigator\n        };\n      });\n      console.log('Tracker.select(): FINISHED');\n    };\n    this.state = default_state;\n    this.navigator = /*#__PURE__*/React.createRef();\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: \"Tracker\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: this.state.component.debug,\n        children: /*#__PURE__*/_jsxDEV(Debug, {\n          state: this.state\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: this.state.button.go_back,\n        onClick: this.goBack,\n        children: \"Go Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: this.state.button.navigator,\n        onClick: this.showNavigator,\n        children: \"Launch Navigator\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: this.state.component.navigator,\n        children: /*#__PURE__*/_jsxDEV(Navigator, {\n          ws: this.ws,\n          navigator: this.state.navigator,\n          filename: this.select,\n          ref: this.navigator\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 4\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","useImperativeHandle","Navigator","Debug","default_state","component","navigator","debug","button","go_back","test","path","tempPath","files","filename","unit","bank_settings","select_ledger","ledgers","update_tables","update_status","Tracker","componentDidMount","ws","onopen","console","log","onmessage","e","response","JSON","parse","data","location","setState","prevState","Object","assign","listdir","componentDidUpdate","prevProps","snapshot","state","new_path","constructor","props","WebSocket","goBack","showNavigator","select","createRef","render"],"sources":["/media/george/DATA/Project/trading bot/2022-10-27/frontend/src/components/Tracker.js"],"sourcesContent":["import React, { Component, useImperativeHandle } from 'react';\nimport Navigator from './tracker/Navigator'\nimport Debug from './tracker/Debug'\n\nconst default_state = {\n\tcomponent: {\n\t\tnavigator: 'hide',\n\t\tdebug: 'show'\n\t},\n\tbutton: {\n\t\tgo_back: 'hide',\n\t\tnavigator: 'show'\n\t},\n\n\tnavigator: {\n\t\ttest: 'hi',\n\t\tpath: '../storage/',\n\t\ttempPath: '../storage/',\n\t\tfiles: [],\n\t},\n\n\tfilename: '',\n\n\tunit: 'kg',\n\n\tbank_settings: {\n\t\tselect_ledger: {\n\t\t\tledgers: [],\n\t\t},\n\t\tupdate_tables: {\n\t\t\tupdate_status: 'Not Ready',\n\t\t},\n\t},\n}\n\nexport default class Tracker extends Component {\n\tws = new WebSocket('ws://localhost:8000/ws/websocket/' + 'tracker' + '/');\n\n\tcomponentDidMount() {\n\t\tthis.ws.onopen = () => {\n\t\t\tconsole.log('connected');\n\t\t}\n\t\tthis.ws.onmessage = (e) => {\n\t\t\tconsole.log(e);\n\n\t\t\tlet response = JSON.parse(e.data).response;\n\t\t\tconsole.log(response);\n\n\t\t\tlet data = JSON.parse(e.data).data;\n\t\t\tconsole.log(data);\n\n\t\t\t//console.log(data.location[0])\n\n\t\t\tif (data.location[0] == 'navigator'){\n\t\t\t\tconsole.log('onmessage() location layer 0: navigator');\n\t\t\t\tthis.setState((prevState) => {\n\t\t\t\t\tlet navigator = Object.assign({}, prevState.navigator);\n\t\t\t\t\tnavigator.files = data.listdir;\n\t\t\t\t\treturn { navigator };\n\t\t\t\t});\n\n\t\t\t};\n\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\n\t\tconsole.log('Tracker.componentDidUpdate(): STARTED')\n\t\tconsole.log(prevState)\n\t\tconsole.log(this.state)\n\n\t\tconsole.log(prevState.navigator.path)\n\t\tconsole.log(this.state.navigator.path)\n\n\t\tif (prevState.navigator.path != this.state.navigator.path) {\n\t\t\tconsole.log('NOT EQUAL')\n\n\t\t\tlet new_path = this.state.navigator.path\n\n\t\t\tthis.setState((prevState) => {\n\t\t\t\tlet navigator = Object.assign({}, prevState.navigator);\n\t\t\t\tnavigator.tempPath = new_path\n\t\t\t\treturn { navigator }\n\t\t\t});\n\t\t}\n\n\t\t//this.navigator.current.listDir();\n\t\tconsole.log('Tracker.componentDidUpdate(): FINISHED')\n\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = default_state;\n\t\tthis.navigator = React.createRef()\n\n\t}\n\n\n\n\n\tgoBack = () => {\n\t\tconsole.log('Tracker.goBack(): STARTED')\n\t\tthis.setState({\n\t\t\tbutton: default_state.button,\n\t\t\tcomponent: default_state.component\n\t\t})\n\t\tconsole.log('Tracker.goBack(): FINISHED')\n\t}\n\n\tshowNavigator = () => {\n\t\tconsole.log('Tracker.showNavigator(): STARTED')\n\t\tthis.setState((prevState) => {\n\t\t\tlet button = Object.assign({}, prevState.button);\n\t\t\tlet component = Object.assign({}, prevState.button);\n\t\t\tbutton.go_back = 'show';\n\t\t\tbutton.navigator = 'hide';\n\t\t\tcomponent.navigator = 'show';\n\t\t\treturn { button, component }\n\t\t});\n\t\tconsole.log('Tracker.showNavigator(): FINISHED')\n\t}\n\n\n\tselect = (filename) => {\n\t\tconsole.log('Tracker.select(): STARTED')\n\t\tlet new_path = this.state.navigator.path + filename + '/'\n\t\tthis.setState((prevState) => {\n\t\t\tlet navigator = Object.assign({}, prevState.navigator);\n\t\t\tnavigator.tempPath = navigator.path\n\t\t\tnavigator.path = new_path\n\n\t\t\treturn { navigator }\n\t\t})\n\n\t\t\n\n\t\t\n\t\tconsole.log('Tracker.select(): FINISHED')\n\t};\n\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<br />\n\t\t\t\t<div className=\"title\">Tracker</div>\n\n\n\n\n\t\t\t\t<br/><br/><br/>\n\t\t\t\t<div className={this.state.component.debug}>\n\t\t\t\t\t<Debug\n\t\t\t\t\t\tstate={this.state}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<br/><br/><br/>\n\t\t\t\t<button\n\t\t\t\t\tclassName={this.state.button.go_back}\n\t\t\t\t\tonClick={this.goBack}\n\t\t\t\t>\n\t\t\t\t\tGo Back\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclassName={this.state.button.navigator}\n\t\t\t\t\tonClick={this.showNavigator}\n\t\t\t\t>\n\t\t\t\t\tLaunch Navigator\n\t\t\t\t</button>\n\t\t\t\t\t\t\t\n\t\t\n\t\t\t\t<div className={this.state.component.navigator}>\n\t\t\t\t\t<Navigator\n\t\t\t\t\t\tws={this.ws}\n\t\t\t\t\t\tnavigator={this.state.navigator}\n\t\t\t\t\t\tfilename={this.select}\n\t\t\t\t\t\tref={this.navigator}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\n\t\t\t</div>\n\t\t);\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}